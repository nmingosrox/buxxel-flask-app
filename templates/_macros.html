{% macro product_card(listing, show_purveyor_button=True) %}
<div class="col-lg-3 col-md-4 col-sm-6 listing-card" data-category="{{ listing.category }}" data-name="{{ listing.name|lower }}" data-image="{{ listing.image_urls[0] if listing.image_urls else '' }}">
    <div class="card h-100 shadow-sm">
        <img src="{{ listing.image_urls[0] if listing.image_urls else 'https://via.placeholder.com/300x200.png?text=No+Image' }}" class="card-img-top" alt="{{ listing.name }}">
        <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ listing.name }}</h5>
            <p class="card-text fw-bold fs-5 mb-3">${{ "%.2f"|format(listing.price) }}</p>
            <div class="mt-auto">
                <button class="btn btn-warning w-100 mb-2 add-to-cart-btn"
                        data-id="{{ listing.id }}"
                        data-name="{{ listing.name }}"
                        data-price="{{ listing.price }}">
                    Add to Cart
                </button>
                {% if show_purveyor_button %}
                <button class="btn btn-outline-secondary w-100 view-purveyor-btn"
                        data-bs-toggle="modal"
                        data-bs-target="#purveyorProfileModal"
                        data-user-id="{{ listing.user_id }}">
                    View Purveyor
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endmacro %}